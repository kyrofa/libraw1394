#!/bin/sh -e

if [ "$1" = "configure" ]; then
	ldconfig usr/lib/@libname@

	if [ ! -c /dev/raw1394 ]; then
		echo
		echo "Required /dev/raw1394 device file not found."
		echo "Without it, libraw1394 is quite useless as it can't talk"
		echo "to the kernel driver."
		echo
		echo -n "Should I create it for you? [N/y] "
		read REPLY

		case "$REPLY" in
		y|yes)
			mknod -m600 /dev/raw1394 c 171 0
			chown root.root /dev/raw1394
			echo
			echo "/dev/raw1394 created."
			echo "It is owned by root with permissions 600.  You may want to fix"
			echo "the group/permission to something appropriate for you."
			echo "Note however that anyone who can open raw1394 can access all"
			echo "devices on all connected 1394 buses unrestricted, including"
			echo "harddisks and other probably sensitive devices."
			;;
		*)
			echo
			echo "/dev/raw1394 not created."
			echo "You can create it at a later time using /dev/MAKEDEV if you"
			echo "have a version that already knows raw1394 or you can create"
			echo "it manually with the command:"
			echo "mknod -m600 /dev/raw1394 c 171 0"
			;;
		esac
	fi
fi

#DEBHELPER#
