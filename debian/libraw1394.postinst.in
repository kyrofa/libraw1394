#!/bin/sh -e

if [ "$1" = "configure" ]; then
	ldconfig

	if [ ! -c /dev/raw1394 ]; then
		echo
		echo "Required /dev/raw1394 device file not found."
		echo "Without it, libraw1394 is quite useless as it can't talk"
		echo "to the kernel driver."
		echo
		echo -n "Should I create it for you? [Y/n] "
		read REPLY

		case "$REPLY" in
		y|yes|"")
			mknod -m600 /dev/raw1394 c 171 0
			chown root.root /dev/raw1394
			echo
			echo "/dev/raw1394 created."
			echo "It is owned by root with read/write permissions for root."
			echo "You may want to fix the group/permission to something"
			echo "appropriate for you.  Note however that anyone who can open"
			echo "raw1394 can access all devices on all connected 1394 buses"
			echo "unrestricted, including harddisks and other probably"
			echo "sensitive devices."
			;;
		*)
			echo
			echo "/dev/raw1394 not created."
			echo "You can create it at a later time using /dev/MAKEDEV if you"
			echo "have a version that already knows raw1394 or you can create"
			echo "it manually with the command:"
			echo "mknod -m600 /dev/raw1394 c 171 0"
			;;
		esac
	fi
fi

#DEBHELPER#
